<% title t('titles.idv.get_letter') %>

<% content_for(:pre_flash_content) do %>
  <%= render StepIndicatorComponent.new(
        steps: step_indicator_steps,
        current_step: @step_indicator_current_step,
        locale_scope: 'idv',
        class: 'margin-x-neg-2 margin-top-neg-4 tablet:margin-x-neg-6 tablet:margin-top-neg-4',
      ) %>
<% end %>

<% if @presenter.resend_requested? %>
  <%= render PageHeadingComponent.new.with_content(@presenter.title) %>
  <p>
    <%= t('idv.gpo.request_another_letter.instructions_html') %>
  </p>
  <p>
    <%= new_tab_link_to(
          t('idv.gpo.request_another_letter.learn_more_link'),
          help_center_redirect_url(
            category: 'verify-your-identity',
            article: 'verify-your-address-by-mail',
            flow: :idv,
            step: :gpo_send_letter,
          ),
        ) %>
  </p>
<% else %>
  <%= render AlertComponent.new(message: t('idv.messages.gpo.info_alert'), class: 'margin-bottom-4') %>
  <%= render PageHeadingComponent.new.with_content(@presenter.title) %>
  <p>
    <%= t('idv.messages.gpo.address_on_file_html') %>
    <%= t('idv.messages.gpo.timeframe_html') %>
  </p>
<% end %>

<div class="margin-y-5">
  <%= button_to @presenter.button,
                idv_request_letter_path,
                method: 'put',
                class: 'usa-button usa-button--big usa-button--wide' %>
</div>

<% if @presenter.show_troubleshooting_options? %>
  <%= render(
        'shared/troubleshooting_options',
        heading: t('components.troubleshooting_options.default_heading'),
        options: [
          {
            url: help_center_redirect_url(
              category: 'verify-your-identity',
              article: 'verify-your-address-by-mail',
              flow: :idv,
              step: :gpo_send_letter,
            ),
            text: t('idv.troubleshooting.options.learn_more_verify_by_mail'),
            new_tab: true,
          },
        ],
      ) %>
<% end %>

<%= render @presenter.back_or_cancel_partial, @presenter.back_or_cancel_parameters %>
