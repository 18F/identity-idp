<% self.title = t('titles.verify_email') %>

<% if @resend_confirmation %>
  <%= render AlertComponent.new(
        type: :success,
        class: 'margin-bottom-4',
        message: t('notices.resend_confirmation_email.success'),
      ) %>
<% end %>

<%= render PageHeadingComponent.new.with_content(t('headings.verify_email')) %>

<p><%= t('notices.signed_up_but_unconfirmed.first_paragraph_start') %>
   <strong><%= email %></strong>
   <%= t('notices.signed_up_but_unconfirmed.first_paragraph_end') %>
</p>

<p><%= t('devise.registrations.close_window') %></p>

<%= render TroubleshootingOptionsComponent.new do |c| %>
  <% c.with_header { t('components.troubleshooting_options.default_heading') } %>
  <% c.with_option(
       action: ->(**tag_options, &block) do
         button_to(
           sign_up_register_path,
           method: :post,
           params: {
             email: @resend_email_confirmation_form.email,
             resend: @resend_email_confirmation_form.resend,
           },
           **tag_options,
           form_class: tag_options[:class],
           class: 'usa-button usa-button--unstyled',
           &block
         )
       end,
     ) %>

  <!-- TODO: Capitalize text !-->
  <% c.with_option(
       url: sign_up_email_path,
     ).with_content(t('notices.use_diff_email.link')) %>
<% end %>

<% if FeatureManagement.enable_load_testing_mode? && EmailAddress.find_with_email(email) %>
  <%= link_to(
        'CONFIRM NOW',
        sign_up_create_email_confirmation_url(confirmation_token: EmailAddress.find_with_email(email).confirmation_token),
        id: 'confirm-now',
      ) %>
<% end %>
