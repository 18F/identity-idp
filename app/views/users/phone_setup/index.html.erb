<% title t('titles.phone_setup') %>
<%= image_tag asset_url('2FA-voice.svg'), alt: '', width: 200, class: 'margin-bottom-2' %>

<h1 class="margin-y-0">
  <%= t('titles.phone_setup') %>
</h1>
<p class="mt-tiny margin-bottom-0">
  <%= t('two_factor_authentication.phone_info_html') %>
</p>
<p class="mt-tiny margin-bottom-1">
  <%= t('two_factor_authentication.phone_fee_disclosure') %>
  <% if FeatureManagement.voip_block? %>
    <%= t('two_factor_authentication.two_factor_choice_options.phone_info_no_voip') %>
  <% end %>
</p>

<%= validated_form_for(@new_phone_form,
                       html: { autocomplete: 'off', method: :patch, role: 'form' },
                       data: { international_phone_form: true },
                       url: phone_setup_path) do |f| %>

  <%= render 'users/shared/phone_number_edit', f: f %>

  <%= render 'users/shared/otp_delivery_preference_selection',
             form_obj: @new_phone_form%>

  <%= link_to t('two_factor_authentication.mobile_terms_of_service'),
              MarketingSite.messaging_practices_url,
              class: "display-block margin-bottom-4" %>

  <% if TwoFactorAuthentication::PhonePolicy.new(current_user).enabled? %>
    <%= render 'users/shared/otp_make_default_number',
               form_obj: @new_phone_form%>
  <% end %>
  <%= f.button :submit, t('forms.buttons.send_security_code'), class: 'usa-button--big usa-button--wide' %>
<% end %>


<div class="margin-top-2 padding-top-1 border-top">
  <%= link_to t('two_factor_authentication.choose_another_option'), two_factor_options_path %>

  <%= stylesheet_link_tag 'intl-tel-input/build/css/intlTelInput' %>
  <%= javascript_packs_tag_once 'intl-tel-input' %>
</div>
