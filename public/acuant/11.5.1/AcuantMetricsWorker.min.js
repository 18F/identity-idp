"use strict";importScripts("AcuantMetricsService.min.js"),AcuantMetricsModule().then((e=>{let r=e.addFunction(n,"vff"),t=e.addFunction(i,"vff");function n(e,r){let t={func:"metrics"};e>=0&&r>=0?(t.sharpness=e,t.glare=r):t.error=e<-.5&&e>-1.5?"Runtime error":e<-1.5&&e>-2.5?"Metrics did not return OK":"Unknown Error Occured",postMessage(t)}function i(e,r){let t={func:"moire"};e>=0&&r>=0?(t.moire=e,t.moireraw=r):t.error=e<-.5&&e>-1.5?"Runtime error":e<-1.5&&e>-2.5?"Moire did not return OK":"Unknown Error Occured",postMessage(t)}function a(r){null!=r&&(e._free(r),r=null)}function s(r){var t=e._malloc(r.length*r.BYTES_PER_ELEMENT);return e.HEAPU8.set(r,t),t}onmessage=o=>{if(o&&o.data)if("metrics"===o.data.func){let t=o.data.data;if(t.imgData&&t.width&&t.height){let n=s(t.imgData);e.ccall("acuantMetrics",null,["number","number","number","number"],[n,t.width,t.height,r]),a(n)}else console.error("missing params"),n(-1,-1)}else if("moire"===o.data.func){let r=o.data.data;if(r.imgData&&r.width&&r.height){let n=s(r.imgData);e.ccall("acuantMoire",null,["number","number","number","number"],[n,r.width,r.height,t]),a(n)}else console.error("missing params"),i(-1,-1)}else console.error("called with no func specified")},postMessage({metricsWorker:"started"})}));