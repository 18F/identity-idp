<% title t('doc_auth.headings.getting_started') %>

<%= render 'shared/maintenance_window_alert' do %>
  <%= render JavascriptRequiredComponent.new(
        header: t('idv.getting_started.no_js_header'),
        intro: t('idv.getting_started.no_js_intro', sp_name: decorated_session.sp_name || t('doc_auth.info.no_sp_name')),
      ) do %>

    <% if @current_user&.reproof_for_irs?(service_provider: @current_sp) %>
    <%= render AlertComponent.new(
          type: :info,
          message: t('doc_auth.info.irs_reproofing_explanation'),
          class: ['margin-bottom-2', 'usa-alert--info-important'],
        )
    %>
    <% end %>

  <%= render PageHeadingComponent.new.with_content(t('doc_auth.headings.getting_started')) %>
    <p>
      <%= t('doc_auth.info.getting_started', sp_name: decorated_session.sp_name || t('doc_auth.info.no_sp_name')) %>
    </p>

    <h2><%= t('doc_auth.getting_started.instructions.getting_started') %></h2>

    <%= render ProcessListComponent.new(heading_level: :h3, class: 'margin-y-3') do |c| %>
      <%= c.with_item(heading: t('doc_auth.getting_started.instructions.bullet1')) do %>
        <p><%= t('doc_auth.getting_started.instructions.text1') %></p>
      <% end %>
      <%= c.with_item(heading: t('doc_auth.getting_started.instructions.bullet2')) do %>
        <p><%= t('doc_auth.getting_started.instructions.text2') %></p>
      <% end %>
      <%= c.with_item(heading: t('doc_auth.getting_started.instructions.bullet3')) do %>
        <ul class="usa-list">
          <% t('doc_auth.getting_started.instructions.text3_html').each do |bullet_item| %>
            <li><%= bullet_item %></li>
          <% end %>
        </ul>
        <%= new_tab_link_to(
              t('idv.troubleshooting.options.learn_more_address_verification_options'),
              help_center_redirect_path(
                category: 'verify-your-identity',
                article: 'phone-number',
                flow: :idv,
                step: :welcome,
                location: 'you_will_need',
              ),
            ) %>
      <% end %>
    <% end %>

  <%= simple_form_for(
        :doc_auth,
        url: url_for,
        method: 'put',
        html: { autocomplete: 'off', class: 'margin-top-2 margin-bottom-5 js-consent-continue-form' },
      ) do |f| %>
    <%= render ClickObserverComponent.new(event_name: 'IdV: consent checkbox toggled') do %>
      <%= render ValidatedFieldComponent.new(
            form: f,
            name: :ial2_consent_given,
            as: :boolean,
            label: t('doc_auth.getting_started.instructions.consent', app_name: APP_NAME),
            required: true,
          ) %>
    <% end %>
    <p class="margin-top-2">
      <%= new_tab_link_to(
            t('doc_auth.getting_started.instructions.learn_more'),
            policy_redirect_url(flow: :idv, step: :agreement, location: :consent),
          ) %>
    </p>
    <div class="margin-top-4">
      <%= render(
            SpinnerButtonComponent.new(
              type: :submit,
              big: true,
              wide: true,
              spin_on_click: false,
            ).with_content(t('doc_auth.buttons.continue')),
          ) %>
    </div>
  <% end %>

    <%= render 'shared/cancel', link: idv_cancel_path(step: 'getting_started') %>
  <% end %>
<% end %>

<%= javascript_packs_tag_once('document-capture-welcome') %>
