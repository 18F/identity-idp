<%#
yields: Warning text to show.
locals:
* contact_support_option: Whether to show "Contact Support" option. Defaults to false.
* name: Slug describing warning screen, for use in analytics.
%>
<% title t('titles.failure.phone_verification') %>

<%= render StatusPageComponent.new(type: :warning) do |c| %>
  <% c.header { t('idv.failure.phone.heading') } %>

  <%= yield %>

  <% c.action_button(
       action: ->(**tag_options, &block) do
         link_to(idv_phone_path, **tag_options, &block)
       end,
     ) { t('idv.failure.button.warning') } %>

  <% if local_assigns[:contact_support_option] %>
    <% c.troubleshooting_option(
         url: MarketingSite.contact_url,
         new_tab: true,
       ) { t('idv.troubleshooting.options.contact_support', app_name: APP_NAME) } %>
  <% end %>

  <% if FeatureManagement.enable_gpo_verification? %>
    <% c.troubleshooting_option(
         url: idv_gpo_path,
       ) { t('idv.troubleshooting.options.verify_by_mail') } %>
  <% end %>

  <% if decorated_session.sp_name %>
    <% c.troubleshooting_option(
         url: return_to_sp_failure_to_proof_path(
           step: 'phone',
           location: local_assigns.fetch(:name, 'warning'),
         ),
         new_tab: true,
       ) { t('idv.troubleshooting.options.get_help_at_sp', sp_name: decorated_session.sp_name) } %>
  <% end %>
<% end %>
